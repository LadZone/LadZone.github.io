<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Simple Personal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen, projection, tv" />
<link rel="stylesheet" href="css/style-print.css" type="text/css" media="print" />
</head>
<body>
<div id="wrapper">
  <div class="title">
    <div class="title-top">
      <div class="title-left">
        <div class="title-right">
          <div class="title-bottom">
            <div class="title-top-left">
              <div class="title-bottom-left">
                <div class="title-top-right">
                  <div class="title-bottom-right">
                    <h1><a href="https://ladzone.github.io/"> <span>F.I.M.P.</span></a></h1>
                    <p>Fully Inovated Mini Project</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <hr class="noscreen" />
  <div class="content">
    <div class="column-left">
      <h3>MENU</h3>
      <a href="#skip-menu" class="hidden">Skip menu</a>
      <ul class="menu">
        <li><a href="http://all-free-download.com/free-website-templates/" class="active">Home</a></li>
        <li><a href="https://ladzone.github.io/">Github</a></li>
        <li><a href="http://six0four.github.io/">CENG 317</a></li>
      </ul>
    </div>
    <div id="skip-menu"></div>
    <div class="column-right">
      <div class="box">
        <div class="box-top"></div>
        <div class="box-in">
          <h2>Welcome to FIMP</h2>
		  </br>
		  <ul class="main-list">
		  <h2>Introduction</h2>
		   </ul>
		  <p>This project will solve many problems. Along with solving problems it will also be very innovative. It will help gamers with better precision, and interact with games. With the haptic feedback feature it will create a real life experience for the user and allow them to make better decisions. Scientists and engineers can use this arm, for experiments where they need to have certain amount of distance clearance from the test site. It can also withstand great amounts of temperature that the normal human hand or body wont be able to bear. Scientists can deal with hot object like lava rocks, or other hot surfaces. These arms can also be used in space, where the astronauts can use the arm from their space ship. With the help of the app, and the integrated camera it will allow users to interact with the environments outside of their reach, and capabilities. Also the app will be saving information received from the arm, and provide logs, so the user can use it to make his/her reports and also use the information to make changes to better the app or hardware. </p>
		  </br>
		  <img src="C1.jpg" alt="IoT" style="width:555px;height:300px;">
		  </br>
		   <ul class="main-list">
		   
		   </br>
		   </br>
		  <h2>Budget</h2>
		  </br>
		   </ul>
		  <p>The budget was planned to be under 200$ Canadian dollars, unfortunately I surpassed that limit and had to get a new Raspberry Pi and few other items so my budget has increased slightly.</P>
		   </br>
		   <ul class="main-list">
            <li><a href="https://www.amazon.ca/gp/product/B01CCF6V3A/ref=oh_aui_detailpage_o02_s00?ie=UTF8&psc=1">New Raspberry Pi 3 kit - $99 CAD</a></li>
            <li><a href="https://www.amazon.ca/gp/product/B00HWKKR0O/ref=oh_aui_detailpage_o06_s00?ie=UTF8&psc=1">Raspberry Pi camera module - $25CAD</a></li>
            <li><a href="https://shop.mime.co.uk/">Robot arm Kit - $70CAD</a></li>
            <li><a href="http://www.canadarobotix.com/force-sensors/flex-sensor-4-5-fs7548">Flex Sensor (4.5") - $18.49 CAD X 4</a></li>
            <li><a href="https://www.amazon.ca/gp/product/B00SI1SPHS/ref=oh_aui_detailpage_o01_s00?ie=UTF8&psc=1">Adafruit 16-Channel PWM $34</a></li>
          </ul>
		  
		  <ul class="main-list">
		  <h2>Time Commitment</h2>
		 <ul class="main-list">
            <li>Buying All the Parts -  1-2 Weeks  </li>
            <li>Building Robot - 4hours</li>
            <li>Building PCB - 3hours</li>
            <li>Programming  - 1 week</li>
          </ul>
		  
		  <h2>Mechanical Assembly</h2>
		  <ul class="main-list">
		  </br>
		  </br>
            <li><font size="4">STEP 1</font>  </li>
			</br>
			
			<P>The MeArm should be fun to build and easy to control. We’ve spent a lot of time putting together instructions for building and controlling the MeArm. We advise that you work out and test how to control your Servo Motors before constructing your MeArm. It will save you time and frustration, and lessen the chance that your MeArm will just be something cool to sit on your shelf.</P>
			<img src="servo.png" alt="IoT" style="width:400px;height:300px;">
			
			<p><a href="servo.py">1 Servos</a></p>
			<p><a href="servo1.py">2 Servos</a></p>
			<p><a href="Test1.py">All Four Motors controlling with keyboard </a></p>
			</br>
			</br>
			
			
			
			
			
            <li><font size="4">STEP 2</font>  </li>
			</br>
			<P>Click on link and follow the steps<P>
			<p><a href="http://www.instructables.com/id/Pocket-Sized-Robot-Arm-meArm-V04/?ALLSTEPS">Link For Building Robot Arm MeArm</a></p>
          </ul>
		  
		  </br>
		  </br>
		  
			
        
		  
		  
		  <li><font size="4">STEP 3</font>  </li>
			</br>
			 <H3> Using A Flex sensor and Servo On The Raspberry Pi Using An MCP3008 </H3>
			<H4> MCP3008 </H4>
			<p>
			In order to measure the X and Y voltages I decided to use an MCP3008 10 bit Analogue to Digital Converter.
			 These devices are cheap, easy to setup and allow 8 analogue inputs to be read by the Pi using it’s SPI interface. 
			 In this tutorial we will only need three of its inputs.
 
			<font size="2"><pre>VDD   3.3V
VREF  3.3V
AGND  GROUND
CLK   GPIO11 (P1-23)
DOUT  GPIO9  (P1-21)
DIN   GPIO10 (P1-19)
CS    GPIO8  (P1-24)
DGND  GROUND</pre></font>
			 
			 </p>
 
			 <img src="mcp3008.png" alt="MCP3008" style="width:304px;height:228px;">
			 
			 <H4> Breadboard Circuit</H4>
			 
			 <p>Here is my test circuit </P>
			 
			 <img src="layout.png" alt="MCP3008" style="width:520px;height:400px;">
			 
			 <p> The MCP3008 is wired up just as it was in my previous post :</p>
			 
			 
			 <pre><font size="2">MCP3008 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Pi &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;      
			--------------    ----------------        
Pin 1  (CH0)      -                      
Pin 2  (CH1)      -                       
Pin 3  (CH2)      -                       
Pin 9  (DGND)     Pin 6  (Ground)         
Pin 10 (CS)       Pin 24 (GPIO8)          
Pin 11 (DIN)      Pin 19 (GPIO10)         
Pin 12 (DOUT)     Pin 21 (GPIO9)          
Pin 13 (CLK)      Pin 23 (GPIO11)         
Pin 14 (AGND)     Pin 6  (Ground)                
Pin 15 (VREF)     Pin 1  (3.3V)           
Pin 16 (VDD)      Pin 1  (3.3V)          </font> </pre>


			<H4>Python Test Script</H4>

			<div style="background-color:#E3E3E3;color:black;padding:10px;">
			 
			<p> #!/usr/bin/env python</p>

			import time</p>
			import RPi.GPIO as GPIO</p>

			GPIO.setmode(GPIO.BCM)</p>
			GPIO.setwarnings(False)</p>

			# read SPI data from MCP3008 chip, 8 possible adc's (0 thru 7)</p>
			def readadc(adcnum, clockpin, mosipin, misopin, cspin):</p>
				if ((adcnum > 7) or (adcnum < 0)):</p>
					return -1</p>
				GPIO.output(cspin, True)</p>

				GPIO.output(clockpin, False)  # start clock low</p>
				GPIO.output(cspin, False)     # bring CS low</p>

				commandout = adcnum</p>
				commandout |= 0x18  # start bit + single-ended bit</p>
				commandout <<= 3    # we only need to send 5 bits here</p>
				for i in range(5):</p>
					if (commandout & 0x80):</p>
						GPIO.output(mosipin, True)</p>
					else:</p>
						GPIO.output(mosipin, False)</p>
					commandout <<= 1</p>
					GPIO.output(clockpin, True)</p>
					GPIO.output(clockpin, False)</p>

				adcout = 0</p>
				# read in one empty bit, one null bit and 10 ADC bits</p>
				for i in range(12):</p>
					GPIO.output(clockpin, True)</p>
					GPIO.output(clockpin, False)</p>
					adcout <<= 1</p>
					if (GPIO.input(misopin)):</p>
						adcout |= 0x1</p>

				GPIO.output(cspin, True)</p>

				adcout >>= 1       # first bit is 'null' so drop it</p>
				return adcout</p>

			PWMOUT = 18</p>
			SPICLK = 22</p>
			SPIMISO = 23</p>
			SPIMOSI = 24</p>
			SPICS = 25</p>

			# set up the interface pins</p>
			GPIO.setup(PWMOUT, GPIO.OUT)</p>
			GPIO.setup(SPIMOSI, GPIO.OUT)</p>
			GPIO.setup(SPIMISO, GPIO.IN)</p>
			GPIO.setup(SPICLK, GPIO.OUT)</p>
			GPIO.setup(SPICS, GPIO.OUT)</p>

			# 10k trim pot connected to adc #0</p>
			potentiometer_adc =0;
			pwm_freq = 50       # Set the PWM frequency to 50 Hz</p>
			last_read = 0       # this keeps track of the last potentiometer value</p>
			tolerance = 0       # to keep from being jittery we'll only change</p>
								# volume when the pot has moved more than 5 'counts'</p>

			# Configure the PWM pin</p>
			p = GPIO.PWM(PWMOUT, pwm_freq)  # channel=18 frequency=50Hz</p>
			p.start(9)</p>

			try:</p>
			  while True:</p>
				# we'll assume that the pot didn't move</p>
				trim_pot_changed = False</p>

				# read the analog pin</p>
				trim_pot = readadc(potentiometer_adc, SPICLK, SPIMOSI, SPIMISO, SPICS)</p>
				# how much has it changed since the last read?</p>
				pot_adjust = abs(trim_pot - last_read)</p>

				if ( pot_adjust > tolerance ):</p>
					trim_pot_changed = True</p>
					last_read = trim_pot</p>

				if ( trim_pot_changed ):</p>
					pwm_pct = round((trim_pot) / 2) # Determine current voltage percentage</p>
					pwm_pct = int(pwm_pct)            # Cast the value as an integer</p>
					DC= 1./18*(pwm_pct)</p>
					print "ADC read: ", trim_pot</p>
					print "PWM percentage: ", pwm_pct</p>
					print "PWM Duty Cycle: ", DC </p>
					
					p.ChangeDutyCycle(DC)</p>

				# hang out and do nothing for a half second</p>
				time.sleep(0.5)</p>
			except KeyboardInterrupt:</p>
				pass</p>

			p.stop()</p>
			GPIO.cleanup()</p>
					
			 
			</div> 
			 </br>
		  </br>
			
			<p><a href="tune_led.py">Download Test Program File </a></p>
			
			 </br>
		  </br>
			
         <li><font size="4">STEP 4</font>  </li>
			</br>
			<P>Making PCB for Flex Sensor<P>
			<img src="pcb.PNG" alt="IoT" style="width:400px;height:300px;">
			<p><a href="mcp30008.sch"> Download Schematic File </a></p>
			
			<img src="PCBB.PNG" alt="IoT" style="width:400px;height:300px;">
			<p><a href="mcp30008.sch">Download Board File </a></p>
			 </br>
		  </br>
		  
		  
		  
		  
		   <li><font size="4">STEP 5</font>  </li>
			</br>
			<P>Adding Adafruit_PWM_Servo_Driver to Raspberry Pi <P>
			<img src="driver.jpg" alt="IoT" style="width:400px;height:300px;">
			</br>
			
			<img src="driver1.jpg" alt="IoT" style="width:400px;height:300px;">
			
			 </br>
		  </br>
		  
		  
		   <h2> Download Code File</h2>
		   </br>
		  <p><a href="Adafruit_PWM_Servo_Driver.py">Adafruit_PWM_Servo_Driver_libary </a></p>
		    <p><a href="Servo_Example.py">Running servo  </a></p>
			  <p><a href="4motor.py">Fully working Robots code</a></p>
		  
		   </br>
		  </br>
		  
			
		 <h2> Testing</h2>
		  <ul class="main-list">
		  </br>
		  </br>
            <h4>This can then be run using  :</h4>
		<div style="background-color:#E3E3E3;color:black;padding:20px;">
		sudo python (File name) .py
		</div>



		<p>If everything has worked correctly you should see an output that looks something like :</P>
		
		<h3> Test 1</h3>

		<img src="output.jpeg" alt="MCP3008" style="width:304px;height:228px;">
		
		<h3> Test 2</h3>
		
		<video width="400" controls>
		<source src="FIMP.mp4" type="video/mp4">
		Your browser does not support HTML5 video.
		</video>
 

		  
		  

		 

		  
         
         
          </ul>
        </div>
      </div>
      <div class="box-bottom">
        <hr class="noscreen" />
      </div>
    </div>
    <div class="cleaner">&nbsp;</div>
  </div>
</div>
</div></body>
</html>
